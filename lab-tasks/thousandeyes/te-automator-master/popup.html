<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>ThousandEyes Automator</title>
  <link href="assets/css/style.css" rel="stylesheet" />
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600&display=swap" rel="stylesheet">
</head>

<body id="popup" class="login-page">
  <nav class="navbar navbar-expand-lg navbar-dark bg-default">
      <div class="container justify-content-center">
          <a class="navbar-brand" href="#"><img src="assets/icons/thousandeyes-logo.png"></a>
      </div>
  </nav>

  <section id="offsite" class="section p-0">
    <div class="container">
      <div class="card-body">
        <div class="text-center mb-3">
          Welcome to ThousandEyes Automator. This extension only becomes active when you are logged into the Cisco SalesConnect.
        </div>
        <div class="text-center mb-3">
          You will be redirected to Cisco SalesConnect in a moment.
        </div>
      </div>
    </div>
  </section>

  <section id="onsite" class="section p-0 invisible">
    <div class="container">

      <div class="row justify-content-center">
        <div class="col p-0">
          <div class="card bg-secondary">
            <div id="apiCredentials" class="card-body">
              <form id="apiCredentialsForm" role="form">
                <div class="form-group mb-3">
                  <div class="input-group input-group-alternative">
                    <div class="input-group-prepend">
                      <span class="input-group-text"><img class="icn" src="assets/icons/icon-person.svg" height="16" width="16"></span>
                    </div>
                    <input class="form-control"  type="email" name="apiEmail" placeholder="Username" required />
                  </div>
                </div>
                <div class="form-group focused">
                  <div class="input-group input-group-alternative">
                    <div class="input-group-prepend">
                      <span class="input-group-text"><img class="icn" src="assets/icons/icon-password.svg" height="16" width="16"></span>
                    </div>
                    <input class="form-control" type="text" name="apiToken" placeholder="API Token" pattern="^[a-z0-9]{32}$" required/>
                  </div>
                </div>
                <div id="apiCredentialsFormError401" class="text-center error mb-3 invisible">Your credentials are wrong.</div>
                <div id="apiCredentialsFormError403" class="text-center error mb-3 invisible">Your ThousandEyes account lacks sufficient permissions.</div>
                <div id="apiCredentialsFormErrorCors" class="text-center error mb-3 invisible"><a id="extensionLink" href="chrome://extensions/" window="extension" class="error">Login request failed.<br>Ensure the extension has Site access permissions to all ThousandEyes sites.<br>Click here to enable it</a>.<br></div>
                <div class="text-center text-dark mb-3">Find your API token<a href="https://app.thousandeyes.com/account-settings/users-roles/?section=profile" window="thousandeyes"> here.</a>
                </div>
                <div class="text-center">
                  <button id="apiCredentialsButton" class="btn btn-default my-2">Enter API credentials</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>

      <div id="loggedIn" class="invisible row card-body">
        <div class="col-7 pt-1 pl-0 pr-0 pb-0 justift-content-center">
          <span id="globalName" class="username">Name</span>
          <span id="globalEmail" class="useremail">Email</span>
        </div>
        <div class="col-5 text-center">
          <button id="loggedInLogoutButton" class="btn btn-default my-2">Logout</button>
        </div>
      </div>

      <div id="openIndex" class="invisible row pb-4">
        <div class="col text-center">
          <button id="openIndexButton" class="btn btn-success pl-5 pr-5">Start</button>
        </div>
      </div>

    </div>
  </section>

  <script src="assets/js/popup.js" type="text/javascript"></script>
</body>

</html>
